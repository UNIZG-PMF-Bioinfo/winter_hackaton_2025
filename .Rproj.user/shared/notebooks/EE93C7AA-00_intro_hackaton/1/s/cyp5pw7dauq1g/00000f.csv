"0","# 1) Train control with class probabilities + ROC optimization"
"0","ctrl <- trainControl("
"0","  method = ""cv"","
"0","  number = 10,"
"0","  classProbs = TRUE,"
"0","  summaryFunction = twoClassSummary,"
"0","  savePredictions = ""final"""
"0",")"
"0",""
"0","# 2) Define a tuning grid for mtry (36 predictors â†’ try a range)"
"0","tune_grid <- expand.grid("
"0","  mtry          = c(2:4, 8, 10),"
"0","  splitrule     = c(""gini""),"
"0","  min.node.size = c(1, 3, 5)"
"0",")"
"0",""
"0","# 3) Train RF with hyperparameter tuning"
"0","set.seed(123)"
"0","rf_model <- train("
"0","  disease ~ .,"
"0","  data = trainData,"
"0","  method = ""ranger"","
"0","  trControl = ctrl,"
"0","  tuneGrid = tune_grid,"
"0","  num.trees = 600,"
"0","  importance = ""impurity"""
"0",")"
"0",""
"0","rf_model$finalModel"
"1","Ranger result

"
"1","Call:
"
"1"," "
"1","ranger::ranger(dependent.variable.name = "".outcome"", data = x, "
"1"," "
"1","    mtry = min(param$mtry, ncol(x)), min.node.size = param$min.node.size, "
"1"," "
"1","    splitrule = as.character(param$splitrule), write.forest = TRUE, "
"1"," "
"1","    probability = classProbs, ...)"
"1"," "
"1","

"
"1","Type:                            "
"1"," "
"1","Probability estimation"
"1"," "
"1","
"
"1","Number of trees:                 "
"1"," "
"1","600"
"1"," "
"1","
"
"1","Sample size:                     "
"1"," "
"1","180"
"1"," "
"1","
"
"1","Number of independent variables: "
"1"," "
"1","15"
"1"," "
"1","
"
"1","Mtry:                            "
"1"," "
"1","3"
"1"," "
"1","
"
"1","Target node size:                "
"1"," "
"1","3"
"1"," "
"1","
"
"1","Variable importance mode:        "
"1"," "
"1","impurity"
"1"," "
"1","
"
"1","Splitrule:                       "
"1"," "
"1","gini"
"1"," "
"1","
"
"1","OOB prediction error (Brier s.): "
"1"," "
"1","0.2261289"
"1"," "
"1","
"
"0","rf_model$bestTune"
